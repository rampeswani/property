{% extends 'login/admin_index.html' %}
{% load static %}
{% block content %}



<div class="content">
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">Propety Create</h5>
        </div>
        <form action="#" autocomplete="off" class="form-validate-jquery" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="card-body">
                <div class="mb-4">
                    <div class="row">
                        <input type="hidden" id="member_id" name="member_id" value="{{membersDataUpdate.member_id}}">

                        <div class="col-md-12 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Title  </label>
                    
                                    <input type="text" placeholder="Enter Title " name="title"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required oninput="validateInput(this)">
                            </div>
                        </div>
                        <!-- end of col -->

                       

                        <!-- end of col -->

                       

                        <!-- end of col -->

                        


                       

                        <!-- end of col -->

                        


                        <div class="col-md-4 mb-2">
                            <div class="form-group">
                                
                                <label for="state" class="form-label">Select State</label>
                                <select class="form-control select" id="state" name="state" required onclick="fetchCities()">
                                    <option value="" selected disabled>Choose a state...</option>
                                            {% for state in stateList %}
                                    <option value="{{ state.state_id }}">{{ state.state_name }}</option>
                                    {% endfor %}
                                </select>
                    
                                    
                            </div>
                        </div>

                        <!-- end of col -->


                        <div class="col-md-4 mb-2">
                            <div class="form-group">
                                <label for="city" class="form-label">City</label>
                                <select class="form-control select" id="city" name="city" required onclick="handleCityChange()">
                                    <option value="" selected disabled>Choose a City</option>
                                </select>
                    
                                    
                            </div>
                        </div>

                        <div class="col-md-4 mb-2">
                            <div class="form-group">
                                <label for="location" class="form-label">Location</label>
                                <select class="form-control select" id="location" name="location" required>
                                    <option value="" selected disabled>Choose a Location</option>
                                    <option value=""> other</option>
                                  </select>
                                
                    
                                    
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Sqrt start range  </label>
                    
                                    <input type="number" placeholder="Enter sqrt start range " name="sqrt_start"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Sqrt end range  </label>
                    
                                    <input type="number" placeholder="Enter sqrt end range " name="sqrt_end"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Price start range  </label>
                    
                                    <input type="number" placeholder="Enter Price start range " name="price_start"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Price end range  </label>
                    
                                    <input type="number" placeholder="Enter price end range " name="price_end"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">No of Parking  </label>
                    
                                    <input type="number" placeholder="Enter Parking " name="parking"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">No of Bathroom  </label>
                    
                                    <input type="number" placeholder="Enter Bathroom " name="bathroom"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>

                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">No of Balcony  </label>
                    
                                    <input type="number" placeholder="Enter Balcony " name="balcony"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required >
                            </div>
                        </div>


                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                
                                <div class="form-group">
                                
                                    <label for="state" class="form-label">Select BHK</label>
                                    <select class="form-control select" id="bhk" name="bhk" required >
                                        <option value="" selected disabled>Choose BHK...</option>
                                                {% for data in bhkList %}
                                        <option value="{{ data.bhk_id }}">{{ data.bhk_name }}</option>
                                        {% endfor %}
                                    </select>
                        
                                        
                                </div>
                    
                                    
                            </div>
                        </div>


                        <!-- end of col -->


                        

                        
                        

                        <!-- end of col -->



                        
                        

                        
                        

                        <!-- end of col -->
                        

                        

                        <!-- end of col -->

                        

                        <!-- end of col -->

                        

                        <!-- end of col -->


                        
                        
                        
                        <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="form-label fw-semibold">Upload Photo : </label>
                                <input class="form-control" type="file" name="photo" id="photo" accept="image/jpeg,image/gif,image/png,image/x-eps" >
                                <!-- {{membersDataUpdate.photo}}  -->
                            </div>
                        </div>

                        <!-- <div class="col-md-6 mb-2">
                            <div class="form-group">
                                <label class="form-label fw-semibold">Upload Photo : </label>
                                <input class="form-control" type="file" name="photo_2" id="photo" accept="image/jpeg,image/gif,image/png,image/x-eps" >
                                <!-- {{membersDataUpdate.photo}}  -->
                            </div>
                        </div> -->

                        <div class="col-md-12 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Remark  </label>
                    
                                    <textarea type="text" placeholder="Enter Remark " name="remark"
                                    value="{{membersDataUpdate.first_name}}" class="form-control" required oninput="validateInput(this)"></textarea>
                            </div>
                        </div>
                        <!-- end of col -->
                        
                        {% if membersDataUpdate.member_id and membersDataUpdate.is_active  == True %}
                        <div class="col-12-md-4 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Active    </label>
                    
                                    <input type="checkbox" name="is_active" id="is_active" checked >
                            </div>
                        </div>

                        {% elif membersDataUpdate.member_id and membersDataUpdate.is_active  == False %}
                        <div class="col-12-md-4 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Active    </label>
                    
                                    <input type="checkbox" name="is_active" id="is_active" >
                            </div>
                        </div>
                        {% endif %}
                    <!-- {% if request.role != 'District Role' %}
                        {% if  membersDataUpdate.member_id and membersDataUpdate.is_home == True %}
                        <div class="col-12-md-4 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Is Home    </label>
                    
                                    <input type="checkbox" name="is_home" checked>
                            </div>
                        </div>
                        {% else %}
                        <div class="col-12-md-4 mb-2">
                            <div class="form-group">
                                <label class="fw-bold fs-5">Is Home    </label>
                    
                                    <input type="checkbox" name="is_home">
                            </div>
                        </div>
                        {% endif %}
                    {% endif %} -->




                    </div>
                    <!-- end of row  -->


                </div>
                <!-- end of cass mb 4 -->

                
                    
            </div>
            <!-- end of class card body -->


            
                
                
            </div>
            <div class="card-footer d-flex justify-content-end">
                <!-- <button type="reset" class="btn btn-light" id="reset">Reset</button> -->
                
                
                {% if membersDataUpdate.member_id %}
                    <input type="submit"  name="btn_updateemployees" class="btn btn-primary"  value="Update">

                {% else %}

                <input type="submit"  name="btn_create_committee" class="btn btn-primary"  value="submit">
                {% endif %}
            </div>
        </form>
    </div>
</div>
<script>
    function validateInput(input) {
        input.value = input.value.replace(/[^a-zA-Z\u0900-\u097F ]/g, '');
    }
</script>

<!-- <script>
    $(document).ready(function () {
        GetStateList('{{employeeDataUpdate.employee_permanent_country_id}}');
        GetStateListcurrent('{{employeeDataUpdate.employee_current_country_id}}');                 

        $("#permanent_country_id").change(function() {
            GetStateList($('#permanent_country_id').val());
        });

        $("#current_country_id").change(function() {
            GetStateListcurrent($('#current_country_id').val());
        });

    });

    function GetStateList(countryID) {
        debugger
            var items = '<option value="">Please Select</option>';
            if (countryID!='')
            {
                url  = 'masters/GetStateListJson/?countryID=' + countryID
                var stateListJson = getRecordList(url);
                $.each(stateListJson, function (i, d) {
                    var selected =''
                    if (d.pk == '{{employeeDataUpdate.employee_permanent_state_id}}' ) {
                        selected = 'selected'
                    }
                    items += "<option " + selected + " value='" + d.pk + "'>" + d.fields['state_name']  + "</option>";
                });
            }
            $('#permanent_state_id').html(items);
        }

    function GetStateListcurrent(countryID) {
        debugger
        var items = '<option value="">Please Select</option>';
        if (countryID!='')
        {
            url  = 'masters/GetStateListJson/?countryID=' + countryID
            var stateListJson = getRecordList(url);
            $.each(stateListJson, function (i, d) {
                var selected =''
                if (d.pk == '{{employeeDataUpdate.employee_current_state_id}}' )
                {
                    selected = 'selected'
                }
                items += "<option " + selected + " value='" + d.pk + "'>" + d.fields['state_name']  + "</option>";
            });
        }
        $('#current_state_id').html(items);
    }



</script> -->


<script>
    function fetchCities() {
    // Get the selected state ID (assuming it's stored in a variable or accessible globally)
    var state_id = $('#state').val(); 

    if (state_id) {
        $.ajax({
            url: '{% url "get_cities_by_state" %}',
            data: {
                'state_id': state_id
            },
            success: function(response) {
                var cities = response.cities;
                $('#city').html('<option value="" selected disabled>Choose a City</option>'); 
                cities.forEach(function(city) {
                    $('#city').append('<option value="' + city.city_id + '">' + city.city_name + '</option>');
                });
            }
        });
    } else {
        // Handle the case where no state is selected
        $('#city').html('<option value="" selected disabled>Please select a state</option>'); 
    }
}

function handleCityChange() {
    $('#city').change(function() {
        var city_id = $(this).val(); 

        $('#location').html('<option value="" selected disabled>Choose a location</option>');
        $('#location').append('<option value="">Other</option>');

        if (city_id) {
            $.ajax({
                url: '{% url "get_locations_by_city" %}',
                data: {
                    'city_id': city_id 
                },
                success: function(response) {
                    var locations = response.locations;
                    $('#location').html('<option value="" selected disabled>Choose a location</option>'); 
                    $('#location').append('<option value="">Other</option>'); 
                    locations.forEach(function(location) {
                        $('#location').append('<option value="' + location.location_id + '">' + location.location_name + '</option>');
                    });
                }
            });
        }
    });
}

</script>
{% endblock content %}